2025-01-29 19:10:25.722 +03:00 [INF] Starting web application
2025-01-29 19:10:25.875 +03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5264: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-01-29 19:10:25.907 +03:00 [FTL] Application terminated unexpectedly
System.IO.IOException: Failed to bind to address http://127.0.0.1:5264: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Only one usage of each socket address (protocol/network address/port) is normally permitted.
 ---> System.Net.Sockets.SocketException (10048): Only one usage of each socket address (protocol/network address/port) is normally permitted.
   at System.Net.Sockets.Socket.UpdateStatusAfterSocketErrorAndThrowException(SocketError error, Boolean disconnectOnFailure, String callerName)
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI\Program.cs:line 59
2025-01-29 19:20:05.238 +03:00 [INF] Starting web application
2025-01-29 19:20:05.382 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 19:20:05.390 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 19:20:05.391 +03:00 [INF] Hosting environment: Development
2025-01-29 19:20:05.392 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 19:22:37.194 +03:00 [INF] Application is shutting down...
2025-01-29 19:29:29.892 +03:00 [INF] Starting web application
2025-01-29 19:29:30.099 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 19:29:30.110 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 19:29:30.113 +03:00 [INF] Hosting environment: Development
2025-01-29 19:29:30.117 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 19:48:29.249 +03:00 [INF] Application is shutting down...
2025-01-29 19:49:33.753 +03:00 [INF] Starting web application
2025-01-29 19:49:33.909 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 19:49:33.915 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 19:49:33.916 +03:00 [INF] Hosting environment: Development
2025-01-29 19:49:33.918 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 19:52:05.841 +03:00 [INF] Application is shutting down...
2025-01-29 19:52:14.163 +03:00 [INF] Starting web application
2025-01-29 19:52:14.978 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 19:52:15.105 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 19:52:15.107 +03:00 [INF] Hosting environment: Development
2025-01-29 19:52:15.108 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 20:01:23.207 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/otp - application/json 83
2025-01-29 20:01:23.267 +03:00 [WRN] Failed to determine the https port for redirect.
2025-01-29 20:01:23.275 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/otp - 404 0 null 69.3956ms
2025-01-29 20:01:23.283 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5264/otp, Response status code: 404
2025-01-29 20:03:05.887 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/otp - application/json 83
2025-01-29 20:03:05.895 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/otp - 404 0 null 7.9593ms
2025-01-29 20:03:05.904 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5264/otp, Response status code: 404
2025-01-29 20:03:28.452 +03:00 [INF] Application is shutting down...
2025-01-29 20:03:51.959 +03:00 [INF] Starting web application
2025-01-29 20:03:52.164 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 20:03:52.174 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 20:03:52.176 +03:00 [INF] Hosting environment: Development
2025-01-29 20:03:52.177 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 20:03:58.632 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/otp - application/json 83
2025-01-29 20:03:59.111 +03:00 [WRN] Failed to determine the https port for redirect.
2025-01-29 20:03:59.119 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/otp - 404 0 null 533.4518ms
2025-01-29 20:03:59.143 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5264/api/otp, Response status code: 404
2025-01-29 20:04:06.635 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/otp - application/json 57
2025-01-29 20:04:06.641 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/otp - 404 0 null 6.2685ms
2025-01-29 20:04:06.646 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5264/api/otp, Response status code: 404
2025-01-29 20:04:43.132 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/auth/otp - application/json 57
2025-01-29 20:04:43.137 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/auth/otp - 404 0 null 4.8625ms
2025-01-29 20:04:43.147 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST http://localhost:5264/api/auth/otp, Response status code: 404
2025-01-29 20:07:36.993 +03:00 [INF] Application is shutting down...
2025-01-29 20:07:58.037 +03:00 [INF] Starting web application
2025-01-29 20:07:58.291 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 20:07:58.316 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 20:07:58.322 +03:00 [INF] Hosting environment: Development
2025-01-29 20:07:58.325 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 20:08:01.273 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/auth/otp - application/json 57
2025-01-29 20:08:01.349 +03:00 [WRN] Failed to determine the https port for redirect.
2025-01-29 20:08:01.355 +03:00 [INF] Executing endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:08:01.414 +03:00 [INF] Route matched with {action = "CreateOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOtp(NayifatAPI.Controllers.CreateOtpRequest) on controller NayifatAPI.Controllers.AuthController (NayifatAPI).
2025-01-29 20:08:02.706 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:08:02.708 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:08:03.869 +03:00 [ERR] Failed executing DbCommand (93ms) [Parameters=[@__request_NationalId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [OTP_Codes] AS [o]
        WHERE [o].[national_id] = @__request_NationalId_0 AND [o].[is_used] = CAST(0 AS bit) AND [o].[expires_at] > GETUTCDATE() AND [o].[created_at] > DATEADD(minute, CAST(-2.0E0 AS int), GETUTCDATE())) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-29 20:08:03.929 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'NayifatAPI.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTP_Codes'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:41eef6dd-e563-47d0-9b71-5ba2d7b8d8a0
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTP_Codes'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:41eef6dd-e563-47d0-9b71-5ba2d7b8d8a0
Error Number:208,State:1,Class:16
2025-01-29 20:08:03.953 +03:00 [ERR] Error creating OTP for National ID: 1234567890
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTP_Codes'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at NayifatAPI.Controllers.AuthController.CreateOtp(CreateOtpRequest request) in C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI\Controllers\AuthController.cs:line 273
ClientConnectionId:41eef6dd-e563-47d0-9b71-5ba2d7b8d8a0
Error Number:208,State:1,Class:16
2025-01-29 20:08:04.032 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-29 20:08:04.124 +03:00 [INF] Executed action NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI) in 2700.3456ms
2025-01-29 20:08:04.156 +03:00 [INF] Executed endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:08:04.192 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/auth/otp - 500 null application/json; charset=utf-8 2922.2853ms
2025-01-29 20:09:13.254 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/auth/otp - application/json 57
2025-01-29 20:09:13.261 +03:00 [INF] Executing endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:09:13.264 +03:00 [INF] Route matched with {action = "CreateOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOtp(NayifatAPI.Controllers.CreateOtpRequest) on controller NayifatAPI.Controllers.AuthController (NayifatAPI).
2025-01-29 20:09:13.311 +03:00 [ERR] Failed executing DbCommand (10ms) [Parameters=[@__request_NationalId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [OTP_Codes] AS [o]
        WHERE [o].[national_id] = @__request_NationalId_0 AND [o].[is_used] = CAST(0 AS bit) AND [o].[expires_at] > GETUTCDATE() AND [o].[created_at] > DATEADD(minute, CAST(-2.0E0 AS int), GETUTCDATE())) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-01-29 20:09:13.318 +03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'NayifatAPI.Data.ApplicationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTP_Codes'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:41eef6dd-e563-47d0-9b71-5ba2d7b8d8a0
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTP_Codes'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:41eef6dd-e563-47d0-9b71-5ba2d7b8d8a0
Error Number:208,State:1,Class:16
2025-01-29 20:09:13.330 +03:00 [ERR] Error creating OTP for National ID: 1234567890
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'OTP_Codes'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at NayifatAPI.Controllers.AuthController.CreateOtp(CreateOtpRequest request) in C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI\Controllers\AuthController.cs:line 273
ClientConnectionId:41eef6dd-e563-47d0-9b71-5ba2d7b8d8a0
Error Number:208,State:1,Class:16
2025-01-29 20:09:13.339 +03:00 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType0`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-01-29 20:09:13.350 +03:00 [INF] Executed action NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI) in 83.5024ms
2025-01-29 20:09:13.351 +03:00 [INF] Executed endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:09:13.353 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/auth/otp - 500 null application/json; charset=utf-8 99.8091ms
2025-01-29 20:13:51.010 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:13:51.126 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:13:51.581 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:13:51.582 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:17:40.016 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:17:40.485 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:18:06.839 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:18:06.925 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:18:07.678 +03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:18:07.699 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-01-29 20:18:08.047 +03:00 [INF] Executed DbCommand (340ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-01-29 20:18:08.171 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-01-29 20:18:08.187 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:18:08.190 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:18:08.203 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:18:08.224 +03:00 [INF] Applying migration '20250129171741_UpdateOtpCodesTable'.
2025-01-29 20:18:08.325 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CustomerDevices] DROP CONSTRAINT [FK_CustomerDevices_Customers_NationalId];
2025-01-29 20:18:08.331 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OtpCodes] DROP CONSTRAINT [FK_OtpCodes_Customers_NationalId];
2025-01-29 20:18:08.338 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] DROP CONSTRAINT [FK_UserNotifications_Customers_NationalId];
2025-01-29 20:18:08.353 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] DROP CONSTRAINT [PK_UserNotifications];
2025-01-29 20:18:08.361 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OtpCodes] DROP CONSTRAINT [PK_OtpCodes];
2025-01-29 20:18:08.370 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CustomerDevices] DROP CONSTRAINT [PK_CustomerDevices];
2025-01-29 20:18:08.472 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'IsSuccessful');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [AuthLogs] DROP COLUMN [IsSuccessful];
2025-01-29 20:18:08.523 +03:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[OtpCodes]') AND [c].[name] = N'Channel');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [OtpCodes] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [OtpCodes] DROP COLUMN [Channel];
2025-01-29 20:18:08.564 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerDevices]') AND [c].[name] = N'IsActive');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [CustomerDevices] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [CustomerDevices] DROP COLUMN [IsActive];
2025-01-29 20:18:08.605 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerDevices]') AND [c].[name] = N'RegisteredAt');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [CustomerDevices] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [CustomerDevices] DROP COLUMN [RegisteredAt];
2025-01-29 20:18:09.215 +03:00 [INF] Executed DbCommand (607ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[UserNotifications]', N'User_Notifications', 'OBJECT';
2025-01-29 20:18:09.221 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OtpCodes]', N'OTP_Codes', 'OBJECT';
2025-01-29 20:18:09.224 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CustomerDevices]', N'Customer_Devices', 'OBJECT';
2025-01-29 20:18:09.230 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[AuthLogs].[ErrorMessage]', N'Status', 'COLUMN';
2025-01-29 20:18:09.236 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[User_Notifications].[IX_UserNotifications_NationalId]', N'IX_User_Notifications_NationalId', 'INDEX';
2025-01-29 20:18:09.241 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Id]', N'id', 'COLUMN';
2025-01-29 20:18:09.246 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[UsedAt]', N'used_at', 'COLUMN';
2025-01-29 20:18:09.255 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[NationalId]', N'national_id', 'COLUMN';
2025-01-29 20:18:09.259 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[IsUsed]', N'is_used', 'COLUMN';
2025-01-29 20:18:09.262 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[ExpiresAt]', N'expires_at', 'COLUMN';
2025-01-29 20:18:09.271 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[CreatedAt]', N'created_at', 'COLUMN';
2025-01-29 20:18:09.276 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Code]', N'otp_code', 'COLUMN';
2025-01-29 20:18:09.279 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Purpose]', N'type', 'COLUMN';
2025-01-29 20:18:09.290 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[IX_OtpCodes_NationalId]', N'IX_OTP_Codes_national_id', 'INDEX';
2025-01-29 20:18:09.293 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[PushToken]', N'Status', 'COLUMN';
2025-01-29 20:18:09.298 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IsBiometricEnabled]', N'BiometricEnabled', 'COLUMN';
2025-01-29 20:18:09.308 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[DeviceName]', N'Model', 'COLUMN';
2025-01-29 20:18:09.312 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IX_CustomerDevices_NationalId]', N'IX_Customer_Devices_NationalId', 'INDEX';
2025-01-29 20:18:09.319 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IX_CustomerDevices_DeviceId]', N'IX_Customer_Devices_DeviceId', 'INDEX';
2025-01-29 20:18:09.369 +03:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'UserAgent');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [UserAgent] nvarchar(max) NULL;
2025-01-29 20:18:09.399 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'IpAddress');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [IpAddress] nvarchar(max) NULL;
2025-01-29 20:18:09.440 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'DeviceId');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [DeviceId] nvarchar(max) NULL;
2025-01-29 20:18:09.481 +03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'CreatedAt');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [AuthLogs] ADD DEFAULT (CURRENT_TIMESTAMP) FOR [CreatedAt];
2025-01-29 20:18:09.544 +03:00 [ERR] Failed executing DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'Id');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [Id] int NOT NULL;
2025-01-29 20:18:29.879 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:18:29.934 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:18:30.884 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:18:30.917 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:18:30.938 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:18:50.599 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:18:50.767 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:19:15.336 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:19:15.408 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:19:16.201 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:19:16.225 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-01-29 20:19:16.590 +03:00 [INF] Executed DbCommand (359ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-01-29 20:19:16.698 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-01-29 20:19:16.713 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:19:16.717 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:19:16.735 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:19:16.755 +03:00 [INF] Applying migration '20250129171852_UpdateOtpCodesTableFixed'.
2025-01-29 20:19:16.825 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CustomerDevices] DROP CONSTRAINT [FK_CustomerDevices_Customers_NationalId];
2025-01-29 20:19:16.829 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OtpCodes] DROP CONSTRAINT [FK_OtpCodes_Customers_NationalId];
2025-01-29 20:19:16.839 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] DROP CONSTRAINT [FK_UserNotifications_Customers_NationalId];
2025-01-29 20:19:16.851 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] DROP CONSTRAINT [PK_UserNotifications];
2025-01-29 20:19:16.859 +03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OtpCodes] DROP CONSTRAINT [PK_OtpCodes];
2025-01-29 20:19:16.868 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CustomerDevices] DROP CONSTRAINT [PK_CustomerDevices];
2025-01-29 20:19:17.076 +03:00 [INF] Executed DbCommand (206ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'IsSuccessful');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [AuthLogs] DROP COLUMN [IsSuccessful];
2025-01-29 20:19:17.176 +03:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[OtpCodes]') AND [c].[name] = N'Channel');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [OtpCodes] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [OtpCodes] DROP COLUMN [Channel];
2025-01-29 20:19:17.272 +03:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerDevices]') AND [c].[name] = N'IsActive');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [CustomerDevices] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [CustomerDevices] DROP COLUMN [IsActive];
2025-01-29 20:19:17.323 +03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerDevices]') AND [c].[name] = N'RegisteredAt');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [CustomerDevices] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [CustomerDevices] DROP COLUMN [RegisteredAt];
2025-01-29 20:19:18.034 +03:00 [INF] Executed DbCommand (706ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[UserNotifications]', N'User_Notifications', 'OBJECT';
2025-01-29 20:19:18.039 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OtpCodes]', N'OTP_Codes', 'OBJECT';
2025-01-29 20:19:18.044 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CustomerDevices]', N'Customer_Devices', 'OBJECT';
2025-01-29 20:19:18.052 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[AuthLogs].[ErrorMessage]', N'Status', 'COLUMN';
2025-01-29 20:19:18.059 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[User_Notifications].[IX_UserNotifications_NationalId]', N'IX_User_Notifications_NationalId', 'INDEX';
2025-01-29 20:19:18.064 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Id]', N'id', 'COLUMN';
2025-01-29 20:19:18.071 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[UsedAt]', N'used_at', 'COLUMN';
2025-01-29 20:19:18.075 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[NationalId]', N'national_id', 'COLUMN';
2025-01-29 20:19:18.080 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[IsUsed]', N'is_used', 'COLUMN';
2025-01-29 20:19:18.086 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[ExpiresAt]', N'expires_at', 'COLUMN';
2025-01-29 20:19:18.091 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[CreatedAt]', N'created_at', 'COLUMN';
2025-01-29 20:19:18.095 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Code]', N'otp_code', 'COLUMN';
2025-01-29 20:19:18.101 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Purpose]', N'type', 'COLUMN';
2025-01-29 20:19:18.107 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[IX_OtpCodes_NationalId]', N'IX_OTP_Codes_national_id', 'INDEX';
2025-01-29 20:19:18.111 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[PushToken]', N'Status', 'COLUMN';
2025-01-29 20:19:18.115 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IsBiometricEnabled]', N'BiometricEnabled', 'COLUMN';
2025-01-29 20:19:18.124 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[DeviceName]', N'Model', 'COLUMN';
2025-01-29 20:19:18.129 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IX_CustomerDevices_NationalId]', N'IX_Customer_Devices_NationalId', 'INDEX';
2025-01-29 20:19:18.137 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IX_CustomerDevices_DeviceId]', N'IX_Customer_Devices_DeviceId', 'INDEX';
2025-01-29 20:19:18.182 +03:00 [INF] Executed DbCommand (42ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'UserAgent');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [UserAgent] nvarchar(max) NULL;
2025-01-29 20:19:18.221 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'IpAddress');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [IpAddress] nvarchar(max) NULL;
2025-01-29 20:19:18.261 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'DeviceId');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [DeviceId] nvarchar(max) NULL;
2025-01-29 20:19:18.297 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'CreatedAt');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [AuthLogs] ADD DEFAULT (CURRENT_TIMESTAMP) FOR [CreatedAt];
2025-01-29 20:19:18.355 +03:00 [ERR] Failed executing DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'Id');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [Id] int NOT NULL;
2025-01-29 20:19:47.380 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:19:47.435 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:19:48.591 +03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:19:48.619 +03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:19:48.638 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:20:34.973 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:20:35.066 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:21:50.600 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:21:50.700 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:21:51.588 +03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:21:51.610 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-01-29 20:21:51.801 +03:00 [INF] Executed DbCommand (186ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-01-29 20:21:51.909 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-01-29 20:21:51.928 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:21:51.932 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:21:51.953 +03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:21:51.977 +03:00 [INF] Applying migration '20250129172036_UpdateAuthLogIdType'.
2025-01-29 20:21:52.056 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CustomerDevices] DROP CONSTRAINT [FK_CustomerDevices_Customers_NationalId];
2025-01-29 20:21:52.061 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OtpCodes] DROP CONSTRAINT [FK_OtpCodes_Customers_NationalId];
2025-01-29 20:21:52.070 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] DROP CONSTRAINT [FK_UserNotifications_Customers_NationalId];
2025-01-29 20:21:52.084 +03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [UserNotifications] DROP CONSTRAINT [PK_UserNotifications];
2025-01-29 20:21:52.091 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OtpCodes] DROP CONSTRAINT [PK_OtpCodes];
2025-01-29 20:21:52.101 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [CustomerDevices] DROP CONSTRAINT [PK_CustomerDevices];
2025-01-29 20:21:52.193 +03:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'IsSuccessful');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [AuthLogs] DROP COLUMN [IsSuccessful];
2025-01-29 20:21:52.226 +03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[OtpCodes]') AND [c].[name] = N'Channel');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [OtpCodes] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [OtpCodes] DROP COLUMN [Channel];
2025-01-29 20:21:52.274 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerDevices]') AND [c].[name] = N'IsActive');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [CustomerDevices] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [CustomerDevices] DROP COLUMN [IsActive];
2025-01-29 20:21:52.312 +03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[CustomerDevices]') AND [c].[name] = N'RegisteredAt');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [CustomerDevices] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [CustomerDevices] DROP COLUMN [RegisteredAt];
2025-01-29 20:21:52.896 +03:00 [INF] Executed DbCommand (577ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[UserNotifications]', N'User_Notifications', 'OBJECT';
2025-01-29 20:21:52.902 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OtpCodes]', N'OTP_Codes', 'OBJECT';
2025-01-29 20:21:52.907 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[CustomerDevices]', N'Customer_Devices', 'OBJECT';
2025-01-29 20:21:52.911 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[AuthLogs].[ErrorMessage]', N'Status', 'COLUMN';
2025-01-29 20:21:52.920 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[User_Notifications].[IX_UserNotifications_NationalId]', N'IX_User_Notifications_NationalId', 'INDEX';
2025-01-29 20:21:52.924 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Id]', N'id', 'COLUMN';
2025-01-29 20:21:52.928 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[UsedAt]', N'used_at', 'COLUMN';
2025-01-29 20:21:52.937 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[NationalId]', N'national_id', 'COLUMN';
2025-01-29 20:21:52.942 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[IsUsed]', N'is_used', 'COLUMN';
2025-01-29 20:21:52.947 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[ExpiresAt]', N'expires_at', 'COLUMN';
2025-01-29 20:21:52.953 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[CreatedAt]', N'created_at', 'COLUMN';
2025-01-29 20:21:52.957 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Code]', N'otp_code', 'COLUMN';
2025-01-29 20:21:52.961 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[Purpose]', N'type', 'COLUMN';
2025-01-29 20:21:52.968 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[OTP_Codes].[IX_OtpCodes_NationalId]', N'IX_OTP_Codes_national_id', 'INDEX';
2025-01-29 20:21:52.971 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[PushToken]', N'Status', 'COLUMN';
2025-01-29 20:21:52.975 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IsBiometricEnabled]', N'BiometricEnabled', 'COLUMN';
2025-01-29 20:21:52.980 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[DeviceName]', N'Model', 'COLUMN';
2025-01-29 20:21:52.985 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IX_CustomerDevices_NationalId]', N'IX_Customer_Devices_NationalId', 'INDEX';
2025-01-29 20:21:52.988 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[Customer_Devices].[IX_CustomerDevices_DeviceId]', N'IX_Customer_Devices_DeviceId', 'INDEX';
2025-01-29 20:21:53.030 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'UserAgent');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [UserAgent] nvarchar(max) NULL;
2025-01-29 20:21:53.073 +03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'IpAddress');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [IpAddress] nvarchar(max) NULL;
2025-01-29 20:21:53.108 +03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var6 sysname;
SELECT @var6 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'DeviceId');
IF @var6 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var6 + '];');
ALTER TABLE [AuthLogs] ALTER COLUMN [DeviceId] nvarchar(max) NULL;
2025-01-29 20:21:53.145 +03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var7 sysname;
SELECT @var7 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[AuthLogs]') AND [c].[name] = N'CreatedAt');
IF @var7 IS NOT NULL EXEC(N'ALTER TABLE [AuthLogs] DROP CONSTRAINT [' + @var7 + '];');
ALTER TABLE [AuthLogs] ADD DEFAULT (CURRENT_TIMESTAMP) FOR [CreatedAt];
2025-01-29 20:21:53.159 +03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [AuthLogs] ADD [FailureReason] nvarchar(max) NULL;
2025-01-29 20:21:53.195 +03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var8 sysname;
SELECT @var8 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[User_Notifications]') AND [c].[name] = N'Data');
IF @var8 IS NOT NULL EXEC(N'ALTER TABLE [User_Notifications] DROP CONSTRAINT [' + @var8 + '];');
ALTER TABLE [User_Notifications] ALTER COLUMN [Data] nvarchar(max) NULL;
2025-01-29 20:21:53.227 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var9 sysname;
SELECT @var9 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[User_Notifications]') AND [c].[name] = N'CreatedAt');
IF @var9 IS NOT NULL EXEC(N'ALTER TABLE [User_Notifications] DROP CONSTRAINT [' + @var9 + '];');
ALTER TABLE [User_Notifications] ADD DEFAULT (CURRENT_TIMESTAMP) FOR [CreatedAt];
2025-01-29 20:21:53.241 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [User_Notifications] ADD [LastUpdated] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2025-01-29 20:21:53.246 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [User_Notifications] ADD [NotificationId] nvarchar(max) NOT NULL DEFAULT N'';
2025-01-29 20:21:53.287 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var10 sysname;
SELECT @var10 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[OTP_Codes]') AND [c].[name] = N'created_at');
IF @var10 IS NOT NULL EXEC(N'ALTER TABLE [OTP_Codes] DROP CONSTRAINT [' + @var10 + '];');
ALTER TABLE [OTP_Codes] ADD DEFAULT (CURRENT_TIMESTAMP) FOR [created_at];
2025-01-29 20:21:53.325 +03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var11 sysname;
SELECT @var11 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Customer_Devices]') AND [c].[name] = N'OsVersion');
IF @var11 IS NOT NULL EXEC(N'ALTER TABLE [Customer_Devices] DROP CONSTRAINT [' + @var11 + '];');
ALTER TABLE [Customer_Devices] ALTER COLUMN [OsVersion] nvarchar(max) NULL;
2025-01-29 20:21:53.330 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customer_Devices] ADD [BiometricToken] nvarchar(max) NULL;
2025-01-29 20:21:53.337 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customer_Devices] ADD [CreatedAt] datetime2 NOT NULL DEFAULT (CURRENT_TIMESTAMP);
2025-01-29 20:21:53.347 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customer_Devices] ADD [Manufacturer] nvarchar(max) NOT NULL DEFAULT N'';
2025-01-29 20:21:53.361 +03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [User_Notifications] ADD CONSTRAINT [PK_User_Notifications] PRIMARY KEY ([Id]);
2025-01-29 20:21:53.372 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OTP_Codes] ADD CONSTRAINT [PK_OTP_Codes] PRIMARY KEY ([id]);
2025-01-29 20:21:53.383 +03:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customer_Devices] ADD CONSTRAINT [PK_Customer_Devices] PRIMARY KEY ([Id]);
2025-01-29 20:21:53.387 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Customer_Devices] ADD CONSTRAINT [FK_Customer_Devices_Customers_NationalId] FOREIGN KEY ([NationalId]) REFERENCES [Customers] ([NationalId]) ON DELETE CASCADE;
2025-01-29 20:21:53.390 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [OTP_Codes] ADD CONSTRAINT [FK_OTP_Codes_Customers_national_id] FOREIGN KEY ([national_id]) REFERENCES [Customers] ([NationalId]) ON DELETE CASCADE;
2025-01-29 20:21:53.394 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [User_Notifications] ADD CONSTRAINT [FK_User_Notifications_Customers_NationalId] FOREIGN KEY ([NationalId]) REFERENCES [Customers] ([NationalId]) ON DELETE CASCADE;
2025-01-29 20:21:53.403 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250129172036_UpdateAuthLogIdType', N'9.0.1');
2025-01-29 20:21:53.411 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-01-29 20:22:03.857 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:22:03.909 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:22:04.602 +03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:22:04.621 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-01-29 20:22:04.643 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-01-29 20:22:04.746 +03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-01-29 20:22:04.757 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:22:04.760 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:22:04.767 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:22:04.780 +03:00 [INF] No migrations were applied. The database is already up to date.
2025-01-29 20:22:04.782 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-01-29 20:23:17.698 +03:00 [INF] Starting web application
2025-01-29 20:23:17.953 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 20:23:17.979 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 20:23:17.989 +03:00 [INF] Hosting environment: Development
2025-01-29 20:23:17.994 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\nayifatapi
2025-01-29 20:23:21.875 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/auth/otp - application/json 68
2025-01-29 20:23:21.937 +03:00 [WRN] Failed to determine the https port for redirect.
2025-01-29 20:23:21.944 +03:00 [INF] Executing endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:23:21.982 +03:00 [INF] Route matched with {action = "CreateOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOtp(NayifatAPI.Controllers.CreateOtpRequest) on controller NayifatAPI.Controllers.AuthController (NayifatAPI).
2025-01-29 20:23:22.263 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-29 20:23:22.325 +03:00 [INF] Executed action NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI) in 337.0955ms
2025-01-29 20:23:22.330 +03:00 [INF] Executed endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:23:22.335 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/auth/otp - 400 null application/problem+json; charset=utf-8 463.7522ms
2025-01-29 20:24:20.182 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/auth/otp - application/json 68
2025-01-29 20:24:20.194 +03:00 [INF] Executing endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:24:20.202 +03:00 [INF] Route matched with {action = "CreateOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateOtp(NayifatAPI.Controllers.CreateOtpRequest) on controller NayifatAPI.Controllers.AuthController (NayifatAPI).
2025-01-29 20:24:20.231 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-29 20:24:20.243 +03:00 [INF] Executed action NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI) in 33.3716ms
2025-01-29 20:24:20.251 +03:00 [INF] Executed endpoint 'NayifatAPI.Controllers.AuthController.CreateOtp (NayifatAPI)'
2025-01-29 20:24:20.254 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/auth/otp - 400 null application/problem+json; charset=utf-8 71.1702ms
2025-01-29 20:25:01.889 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5264/api/auth/otp/generate - application/json 68
2025-01-29 20:25:01.892 +03:00 [INF] Executing endpoint 'NayifatAPI.Controllers.AuthController.GenerateOtp (NayifatAPI)'
2025-01-29 20:25:01.899 +03:00 [INF] Route matched with {action = "GenerateOtp", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GenerateOtp(NayifatAPI.Controllers.OtpGenerateRequest) on controller NayifatAPI.Controllers.AuthController (NayifatAPI).
2025-01-29 20:25:01.909 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-29 20:25:01.912 +03:00 [INF] Executed action NayifatAPI.Controllers.AuthController.GenerateOtp (NayifatAPI) in 9.5797ms
2025-01-29 20:25:01.913 +03:00 [INF] Executed endpoint 'NayifatAPI.Controllers.AuthController.GenerateOtp (NayifatAPI)'
2025-01-29 20:25:01.914 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5264/api/auth/otp/generate - 400 null application/problem+json; charset=utf-8 25.0235ms
2025-01-29 20:31:40.739 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:31:40.844 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:40:01.382 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:40:01.450 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:43:03.838 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:43:03.975 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:43:29.286 +03:00 [WRN] No store type was specified for the decimal property 'SalaryCustomer' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:43:29.340 +03:00 [WRN] No store type was specified for the decimal property 'SalaryDakhli' on entity type 'Customer'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-29 20:43:29.911 +03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:43:29.925 +03:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-01-29 20:43:30.306 +03:00 [INF] Executed DbCommand (378ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-01-29 20:43:30.651 +03:00 [INF] Executed DbCommand (245ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-01-29 20:43:30.744 +03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-29 20:43:30.762 +03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-29 20:43:30.807 +03:00 [INF] Executed DbCommand (40ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-29 20:43:30.826 +03:00 [INF] Applying migration '20250129173141_CreateOtpCodesTable'.
2025-01-29 20:43:30.862 +03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250129173141_CreateOtpCodesTable', N'9.0.1');
2025-01-29 20:43:30.865 +03:00 [INF] Applying migration '20250129174305_InitialMigration'.
2025-01-29 20:43:31.064 +03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250129174305_InitialMigration', N'9.0.1');
2025-01-29 20:43:31.322 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-01-29 20:45:03.479 +03:00 [INF] Starting web application
2025-01-29 20:45:03.647 +03:00 [INF] Now listening on: http://localhost:5264
2025-01-29 20:45:03.679 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-29 20:45:03.680 +03:00 [INF] Hosting environment: Development
2025-01-29 20:45:03.684 +03:00 [INF] Content root path: C:\Users\yamta\StudioProjects\nayifat_app_2025_new\NayifatAPI
2025-01-29 20:45:48.180 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5264/api/test/db-connection - null null
2025-01-29 20:45:48.355 +03:00 [WRN] Failed to determine the https port for redirect.
2025-01-29 20:45:48.633 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5264/api/test/db-connection - 404 0 null 455.4693ms
2025-01-29 20:45:51.147 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5264/api/test/db-connection, Response status code: 404
